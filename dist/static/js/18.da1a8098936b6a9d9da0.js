webpackJsonp([18],{"5cqN":function(t,s){},nxYv:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("fZjL"),n=i.n(a),e=i("woOf"),o=i.n(e),c=i("8MDr"),l=i("3Q4o"),r={data:function(){return{newTab:{},keyId:[],catalogmenu:[],catalogmenuTwo:[],catalogrank:[],currentIndex:0,scrollY:-1,diff:-1,isEnd:!1,title:""}},watch:{$route:function(t,s){console.log()},newTab:function(t){var s=this;setTimeout(function(){s._calculateHeight()},20)},scrollY:function(t){var s=this.listHeight;if(t>0)this.currentIndex=0;else{for(var i=0;i<s.length-1;i++){var a=s[i],n=s[i+1];if(-t>=a&&-t<n)return this.currentIndex=i,void(this.diff=n+t)}this.currentIndex=s.length-2}}},props:[""],components:{iIScroll:c.a},methods:{catalogsList:function(){var t=this,s={0:{id:"1",parent_id:"46",catalog_name:"全部动态",catalog_name_second:""}};this.$ajax("catalogsList").then(function(i){var a=i.data.info,e=t.$route.params.id;for(var c in a)c==e&&(t.newTab=o()(a[c].son,s),t.keyId=n()(a[c].son));t.title=a[e].catalog_name,t.catalogrankList(),t.keyId.slice(1,t.keyId.length).forEach(function(s,i){t.catalogmenuList(s)})})},catalogrankList:function(){var t=this.$route.params.id,s=this;this.$ajax("catalogrank",{cid:t}).then(function(t){s.catalogrank=t.data.info,s.$set(s.newTab[0],"result",t.data.info)})},catalogmenuList:function(t){var s=this;this.$ajax("catalogmenu",{cid:t,order:3,page_size:4}).then(function(i){s.$set(s.newTab[t],"result",i.data.info.Datas)})},_pad:function(t){for(var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=t.toString().length;i<s;)t="0"+t,i++;return t},format:function(t){return((t|=0)/60/1e3|0)+":"+this._pad(t%60)},getJsonLength:function(t){var s=0;for(var i in t)s++;return s},tabclick:function(t,s){this.currentIndex=t;var i=Object(l.b)(s.target,"index");this._scrollTo(i)},scroll:function(t){this.scrollY=t.y;for(var s=this.$refs.tabcontent.children,i=0,a=0;a<this.currentIndex+1;a++)i+=s[a].clientWidth,console.log(this.$refs.subScroll.offsetLeft),i>=document.body.clientWidth&&(console.log(this.$refs.tabcontent),this.$refs.tabcontent.style.right=s[a].clientWidth+"px");console.log(t)},_scrollTo:function(t){(t||0===t)&&(t<0?t=0:t>this.listHeight.length-2&&(t=this.listHeight-2),this.scrollY=-this.listHeight[t],this.$refs.listview.scrollToElement(this.$refs.listGroup[t],0))},_calculateHeight:function(){this.listHeight=[];var t=this.$refs.listGroup,s=0;this.listHeight.push(s);for(var i=0;i<t.length;i++)s+=t[i].clientHeight,this.listHeight.push(s)},onShortcutTouchStart:function(t){var s=t.touches[0];this.touch.x1=s.pageX},onShortcutTouchMove:function(t){var s=t.touches[0];this.touch.x2=s.pageX;var i=0|-(this.touch.x1-this.touch.x2),a=void 0;this.isEnd&&(a=Number(this.$refs.tabcontent.style.left.split("px")[0])),this.$refs.tabcontent.style.left=a?a+i+"px":i+"px",this.isEnd=!1},onShortcutTouchEnd:function(t){console.log(t),this.isEnd=!0}},created:function(){this.catalogsList(),this.touch={},this.probeType=3,this.listenScroll=!0,this.listHeight=[]},mounted:function(){}},u={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"catalogs"}},[i("div",{staticClass:"sub-header"},[t._v(t._s(t.title))]),t._v(" "),i("div",{ref:"subScroll",staticClass:"sub-nav"},[i("ul",{ref:"tabcontent",staticClass:"sub-catalogs"},t._l(t.newTab,function(s,a,n){return i("li",{staticClass:"li-cat",class:{active:n==t.currentIndex},attrs:{"data-index":n},on:{click:function(s){t.tabclick(n,s)}}},[i("a",{attrs:{href:"javascript:;","data-index":n}},[t._v(t._s(s.catalog_name))])])}))]),t._v(" "),i("iIScroll",{ref:"listview",staticClass:"recommend-content",attrs:{"listen-scroll":t.listenScroll,"probe-type":t.probeType},on:{scroll:t.scroll}},[i("div",t._l(t.newTab,function(s,a,n){return i("div",{ref:"listGroup",refInFor:!0,staticClass:"Panel trans"},[i("div",{staticClass:"panel-head"},[i("div",{staticClass:"panel-title"},[i("div",{staticClass:"callout"},[t._v(t._s(s.catalog_name))])])]),t._v(" "),i("div",{staticClass:"panel-body"},[i("div",{staticClass:"SoundList"},t._l(s.result,function(s,a){return i("div",{staticClass:"Thumbnail list-sound large"},[i("div",{staticClass:"cover"},[i("img",{staticClass:"cover-img",attrs:{src:s.front_cover}})]),t._v(" "),i("a",{staticClass:"detail",attrs:{href:"/sound/"+s.id}},[i("div",{staticClass:"title"},[t._v(t._s(s.soundstr))]),t._v(" "),i("div",{staticClass:"username"},[t._v("UP主："+t._s(s.username))]),t._v(" "),i("div",{staticClass:"statistics"},[i("div",{staticClass:"item play-times"},[t._v(t._s(s.view_count))]),t._v(" "),i("div",{staticClass:"item duration"},[t._v(t._s(t.format(s.duration)))])])])])}))])])}))])],1)},staticRenderFns:[]};var h=i("VU/8")(r,u,!1,function(t){i("5cqN")},null,null);s.default=h.exports}});
//# sourceMappingURL=18.da1a8098936b6a9d9da0.js.map