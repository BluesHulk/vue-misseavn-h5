webpackJsonp([2,7,8,9],{"1WWl":function(t,e,n){"use strict";var s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("222")])},staticRenderFns:[]};e.a=s},"24pp":function(t,e){},"3wIs":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("AWSm"),i=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);var a=n("wrGb");var o=function(t){n("Dwxr")},c=n("VU/8")(i.a,a.a,!1,o,null,null);e.default=c.exports},"4bDn":function(t,e){},AWSm:function(t,e){},Dwxr:function(t,e){},Fctb:function(t,e){},G98L:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Dd8w"),i=n.n(s),r=n("NYxO"),a=n("3Q4o"),o=Object(a.d)("transform"),c={props:{percent:{type:Number,default:0}},watch:{percent:function(t){if(t>=0&&!this.touch.inititaed){var e=t*(this.$refs.progressBar.clientWidth-16);this._offset(e)}}},created:function(){this.touch={}},methods:{progressTouchStart:function(t){this.touch.inititaed=!0,this.touch.startX=t.touches[0].pageX,this.touch.left=this.$refs.progress.clientWidth},progressTouchMove:function(t){if(this.touch.inititaed){var e=t.touches[0].pageX-this.touch.startX,n=Math.min(this.$refs.progressBar.clientWidth-16,Math.max(0,this.touch.left+e));this._offset(n),this._triggerPecent()}},progressTouchEnd:function(){this.touch.inititaed=!1},progressClick:function(t){var e=this.$refs.progressBar.getBoundingClientRect(),n=t.pageX-e.left;this._offset(n),this._triggerPecent()},_offset:function(t){this.$refs.progress.style.width=t+"px",this.$refs.progressBtn.style[o]="translate3d("+t+"px,0,0)"},_triggerPecent:function(){var t=this.$refs.progressBar.clientWidth-16,e=this.$refs.progress.clientWidth/t;this.$emit("progressPecent",e)}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"progressBar",staticClass:"progress-bar",on:{click:t.progressClick}},[n("div",{staticClass:"bar-inner"},[n("div",{ref:"progress",staticClass:"progress"}),t._v(" "),n("div",{ref:"progressBtn",staticClass:"progress-btn-wrapper",on:{touchstart:function(e){return e.preventDefault(),t.progressTouchStart(e)},touchmove:function(e){return e.preventDefault(),t.progressTouchMove(e)},touchend:t.progressTouchEnd}},[n("div",{staticClass:"progress-btn"})])])])},staticRenderFns:[]};var d=n("VU/8")(c,u,!1,function(t){n("hHLE")},"data-v-7f8d4504",null).exports,l=n("VQ9m"),f=n("3wIs"),h=n("aC/0"),p=n("ZXSn"),v=n("mFlh"),_={data:function(){return{soundSrc:"",front_img:"",cover_image:"",songReady:!1,currentTime:0,pay_type:"",percent:0,duration:0,tabList:v.a.soundTab,id:"",tabIndex:0,soundId:"",comments_count:""}},computed:i()({},Object(r.b)(["playing"]),{playIcon:function(){return this.playing?"btn-pause":"btn-play"}}),created:function(){var t=this.$route.params.soundId;console.log(this.$route.params),this.audioSrc(t)},watch:{$route:function(t,e){console.log(t,e)},playing:function(t){var e=this.$refs.audio;console.log(e),this.$nextTick(function(){t?e.play():e.pause()})}},methods:{tabClick:function(t){this.tabIndex=t},audioSrc:function(t){var e=this;this.$ajax("soundDeatil",{soundid:t}).then(function(t){e.soundSrc=t.data.info.sound.soundurl_64,e.pay_type=t.data.info.sound.pay_type,e.front_img=t.data.info.sound.front_cover,e.cover_image="//static.missevan.com/mosaic/"+t.data.info.sound.cover_image,e.comments_count=t.data.info.sound.comments_count})},_pad:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t.toString().length;n<e;)t="0"+t,n++;return t},format:function(t){return((t|=0)/60|0)+":"+this._pad(t%60)},togglePlaying:function(){console.log("///"),this.$store.dispatch("setPlayingState",!this.playing)},ready:function(){this.songReady=!0},end:function(){},updataTime:function(t){this.currentTime=t.target.currentTime},error:function(){this.songReady=!0},loop:function(){this.$refs.audio.currentTime=0,this.$refs.audio.play()},onProgressChange:function(t){this.$refs.audio;this.$refs.audio.currentTime=this.$refs.audio.duration*t,this.playing||this.togglePlaying()},addEventListeners:function(){this.$refs.audio.addEventListener("timeupdate",this._currentTime),this.$refs.audio.addEventListener("canplay",this._durationTime)},removeEventListeners:function(){this.$refs.audio.removeEventListener("timeupdate",this._currentTime),this.$refs.audio.removeEventListener("canplay",this._durationTime)},_currentTime:function(){this.timeNow=parseInt(this.$refs.audio.currentTime),this.percent=this.currentTime/this.duration},_durationTime:function(){this.duration=parseInt(this.$refs.audio.duration),console.log(this.duration,this.currentTime)},init:function(){this.soundId=this.$route.params.soundId,"introduction"==this.$route.params.tabIndex?this.tabIndex=0:"discuss"==this.$route.params.tabIndex?this.tabIndex=1:"images"==this.$route.params.tabIndex&&(this.tabIndex=2)}},components:{iIprogress:d,iItab:l.a,iIntroduction:f.default,iImage:p.default,iIcomments:h.default},mounted:function(){this.addEventListeners(),this.init()}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"detail"}},[n("div",{attrs:{id:"SoundPage"}},[n("div",{attrs:{id:"SoundPlayer"}},[n("div",{staticClass:"cover",style:{backgroundImage:"url("+t.cover_image+")",display:"block"}},[n("div",{staticClass:"record-disk"},[n("img",{attrs:{src:t.front_img}})])]),t._v(" "),t._m(0),t._v(" "),0==t.pay_type?n("div",{staticClass:"controller"},[n("div",{staticClass:"btn-icon",class:t.playIcon,on:{click:function(e){t.togglePlaying()}}})]):t._e(),t._v(" "),n("div",{staticClass:"progress-bar"},[0==t.pay_type?n("iIprogress",{attrs:{percent:t.percent},on:{progressPecent:t.onProgressChange}}):t._e()],1),t._v(" "),n("div",{staticClass:"sound-time"},[n("span",{staticClass:"played-time"},[t._v(t._s(t.format(t.currentTime)))]),t._v(" "),n("span",{staticClass:"duration"},[t._v(t._s(t.format(t.duration)))])]),t._v(" "),1==t.pay_type?n("div",{staticClass:"pay-cover"},[n("span",[t._v("本音频为付费内容")]),t._v(" "),n("span",[t._v("仅支持客户端收听")]),t._v(" "),n("button",{staticClass:"btn-red"},[t._v("去 APP 付费")])]):t._e()]),t._v(" "),t._m(1),t._v(" "),n("iItab",{attrs:{tabList:t.tabList,commentCount:t.comments_count,initSelect:t.tabIndex},on:{"tab-click":t.tabClick}}),t._v(" "),0==t.tabIndex?n("iIntroduction"):t._e(),t._v(" "),1==t.tabIndex?n("iIcomments"):t._e(),t._v(" "),2==t.tabIndex?n("iImage"):t._e()],1),t._v(" "),0==t.pay_type?n("audio",{ref:"audio",attrs:{src:"https://static.missevan.com/"+t.soundSrc},on:{canplay:t.ready,ended:t.end,error:t.error,timeupdate:t.updataTime}}):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"danmaku-stage-wrap"},[e("div",{staticClass:"danmaku"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sound-action-container"},[e("ul",{staticClass:"sound-action"},[e("li",{staticClass:"share"},[e("i"),e("span",[this._v("分享")])]),this._v(" "),e("li",{staticClass:"like"},[e("i"),e("span",[this._v("喜欢")])]),this._v(" "),e("li",{staticClass:"download"},[e("i"),e("span",[this._v("下载")])])])])}]};var g=n("VU/8")(_,m,!1,function(t){n("Fctb")},null,null);e.default=g.exports},KI37:function(t,e,n){"use strict";var s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("333")])},staticRenderFns:[]};e.a=s},REAs:function(t,e){},VQgj:function(t,e){},ZXSn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("REAs"),i=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);var a=n("KI37");var o=function(t){n("4bDn")},c=n("VU/8")(i.a,a.a,!1,o,null,null);e.default=c.exports},"aC/0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("24pp"),i=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);var a=n("1WWl");var o=function(t){n("VQgj")},c=n("VU/8")(i.a,a.a,!1,o,null,null);e.default=c.exports},hHLE:function(t,e){},wrGb:function(t,e,n){"use strict";var s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("1111")])},staticRenderFns:[]};e.a=s}});
//# sourceMappingURL=2.ff2426f6f0503f960aa7.js.map